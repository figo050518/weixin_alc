<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.fcgo.weixin.persist.dao.ISellerCustomerDAO" >
	<resultMap id="SellerCustomerMap" type="com.fcgo.weixin.persist.po.SellerCustomerPO" >
	    <id column="user_ID" property="userId" jdbcType="INTEGER" />
	    <result column="SUMMONER" property="sumMoney" jdbcType="DECIMAL" />
  </resultMap>
  <!-- 分页查询客户关系 -->
  <select id="findCustomeLsitBySellerId" parameterType="map" resultMap="SellerCustomerMap">
  		select distinct user_id ,sum(PRO_AMOUNT) as SumMoney  from ord_order_info where  order_State = 3  
  		 and  seller_id=#{sellerId, jdbcType=DECIMAL}  group by user_id  order by SumMoney desc  
  		 limit #{startPage, jdbcType=DECIMAL},#{endPage, jdbcType=DECIMAL}
  </select>
  <!-- 客户详细 -->
  <select id="findCustomeByDetail" parameterType="map" resultMap="SellerCustomerMap">
  		select distinct user_id ,sum(PRO_AMOUNT) as SumMoney  from ord_order_info where  order_State = 3  
  		 and seller_id=#{sellerId, jdbcType=DECIMAL} and user_id=#{userId, jdbcType=DECIMAL}  group by user_id  order by SumMoney desc 
  </select>
   <select id="findCustomeByCount" parameterType="int" resultType="int">
  		select count(distinct user_id) from ord_order_info where seller_id=#{sellerId, jdbcType=DECIMAL}  and order_State = 3  
  </select>
</mapper>